<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python 3.7의 새로운 기능들 | GeekHub</title>
    <meta name="description" content="A team of geeeeky powered and diverse geeks.">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/4.styles.54586f27.css" as="style"><link rel="preload" href="/assets/js/app.2a5b1e14.js" as="script"><link rel="preload" href="/assets/js/0.10ada99b.js" as="script"><link rel="prefetch" href="/assets/js/1.c530be96.js"><link rel="prefetch" href="/assets/js/2.a9c8da6a.js"><link rel="prefetch" href="/assets/js/3.fc1bc193.js">
    <link rel="stylesheet" href="/assets/css/4.styles.54586f27.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      GeekHub
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="https://github.com/geekhub-lab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="https://github.com/geekhub-lab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Python 3.7의 새로운 기능들</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/translation-python37-new-features/#breakpoint-내장-함수-지원" class="sidebar-link">breakpoint() 내장 함수 지원</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/translation-python37-new-features/#데이터-클래스-dataclass" class="sidebar-link">데이터 클래스 (dataclass)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/translation-python37-new-features/#모듈-속성-커스터마이징" class="sidebar-link">모듈 속성 커스터마이징</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/translation-python37-new-features/#향상된-타이핑" class="sidebar-link">향상된 타이핑</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/translation-python37-new-features/#시간-정밀도" class="sidebar-link">시간 정밀도</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/translation-python37-new-features/#기타-멋진-기능들" class="sidebar-link">기타 멋진 기능들</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#딕셔너리-순서-보장" class="sidebar-link">딕셔너리 순서 보장</a></li><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#async-및-await-키워드-추가" class="sidebar-link">&quot;async&quot; 및 &quot;await&quot; 키워드 추가</a></li><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#새로워진-asyncio" class="sidebar-link">새로워진 &quot;asyncio&quot;</a></li><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#컨텍스트-변수" class="sidebar-link">컨텍스트 변수</a></li><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#importlib-resources-로-데이터-파일-불러오기" class="sidebar-link">&quot;Importlib.resources&quot;로 데이터 파일 불러오기</a></li><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#개발자를-위한-트릭" class="sidebar-link">개발자를 위한 트릭</a></li><li class="sidebar-sub-header"><a href="/blog/translation-python37-new-features/#최적화" class="sidebar-link">최적화</a></li></ul></li><li><a href="/blog/translation-python37-new-features/#그래서-업그레이드를-해야하나요" class="sidebar-link">그래서, 업그레이드를 해야하나요?</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="python-3-7의-새로운-기능들"><a href="#python-3-7의-새로운-기능들" aria-hidden="true" class="header-anchor">#</a> Python 3.7의 새로운 기능들</h1><blockquote><p><a href="https://realpython.com/python37-new-features/" target="_blank" rel="noopener noreferrer">Cool New Features in Python 3.7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 번역한 글입니다.</p><p><em>Translated by 강명서 (Leop0ld), 권민재 (mingrammer) and 박상우 (Bill-Park)</em></p></blockquote><p><img src="/cool-new-features-in-python-37.png" alt="Cool New Features in Python 3.7"></p><hr><p></p><div class="table-of-contents"><ul><li><a href="#breakpoint-내장-함수-지원">breakpoint() 내장 함수 지원</a></li><li><a href="#데이터-클래스-dataclass">데이터 클래스 (dataclass)</a></li><li><a href="#모듈-속성-커스터마이징">모듈 속성 커스터마이징</a></li><li><a href="#향상된-타이핑">향상된 타이핑</a></li><li><a href="#시간-정밀도">시간 정밀도</a></li><li><a href="#기타-멋진-기능들">기타 멋진 기능들</a><ul><li><a href="#딕셔너리-순서-보장">딕셔너리 순서 보장</a></li><li><a href="#async-및-await-키워드-추가">&quot;async&quot; 및 &quot;await&quot; 키워드 추가</a></li><li><a href="#새로워진-asyncio">새로워진 &quot;asyncio&quot;</a></li><li><a href="#컨텍스트-변수">컨텍스트 변수</a></li><li><a href="#importlib-resources-로-데이터-파일-불러오기">&quot;Importlib.resources&quot;로 데이터 파일 불러오기</a></li><li><a href="#개발자를-위한-트릭">개발자를 위한 트릭</a></li><li><a href="#최적화">최적화</a></li></ul></li><li><a href="#그래서-업그레이드를-해야하나요">그래서, 업그레이드를 해야하나요?</a></li></ul></div><p></p><hr><p>Python 3.7이 <a href="https://www.python.org/downloads/release/python-370/" target="_blank" rel="noopener noreferrer">공식적으로 릴리스<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 되었습니다. 이 버전은 <a href="https://www.python.org/dev/peps/pep-0537/" target="_blank" rel="noopener noreferrer">2016년 9월<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>부터 개발되어 왔으며 핵심 개발자들의 노력으로 드디어 사용할 수 있게 되었습니다.</p><p>새로운 버전에선 어떤 것들이 바뀌었을까요? <a href="https://docs.python.org/3.7/whatsnew/3.7.html" target="_blank" rel="noopener noreferrer">Python 3.7 문서<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에서 새로운 기능들을 살펴볼 수도 있지만, 이 포스트에서는 주목할만한 변경점들에 대해서 좀 더 자세히 다뤄보고자 합니다.</p><p>이 포스트에서 다룰 내용은 다음과 같습니다.</p><ul><li>새로운 breakpoint() 내장 함수를 통한 좀 더 수월한 디버깅</li><li>데이터 클래스(dataclass)를 사용한 간편한 클래스 생성</li><li>모듈 속성 접근 커스터마이징</li><li>향상된 타입 힌팅 지원</li><li>고정밀 시간 함수</li></ul><p>더 중요한 건 Python3.7은 빠르다는 것입니다.</p><p>Python 3.7의 속도에 대해서도 마지막 섹션에서 살펴볼 것입니다. 새로운 버전으로의 업그레이드에 대한 여러 조언을 얻을 수 있을 것입니다.</p><h2 id="breakpoint-내장-함수-지원"><a href="#breakpoint-내장-함수-지원" aria-hidden="true" class="header-anchor">#</a> breakpoint() 내장 함수 지원</h2><p>개발자들은 완벽한 코드를 작성하려고 노력하지만, 진실은 결코 완벽한 코드를 작성할 수는 없다는 것입니다. 디버깅은 프로그래밍의 중요한 부분입니다. Python 3.7에는 breakpoint()라는 새로운 내장 함수가 들어왔습니다. 이 함수는 Python에 새로운 기능을 제공하지는 않지만 디버거를 좀 더 유연하고 직관적으로 사용할 수 있게 해줍니다.</p><p>여러분이 <code>bugs.py</code> 파일에 다음과 같은 버그를 유발하는 코드를 작성했다고 가정해봅시다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> f <span class="token operator">/</span> e

a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>divide<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>코드를 실행하면 <code>divide()</code> 함수에서 <code>ZeroDivisionError</code> 익셉션이 발생할 것입니다. 여러분은 디버깅을 위해  <code>divide()</code> 최상단에 <a href="https://realpython.com/python-debugging-pdb/" target="_blank" rel="noopener noreferrer">디버거<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 위치시켜 코드를 인터럽트하고 싶을겁니다. 코드에 소위 &quot;중단점(breakpoint)&quot;이라고 하는걸 설정하면 코드를 인터럽트 할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 중단점 삽입 지점</span>
    <span class="token keyword">return</span> f <span class="token operator">/</span> e
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>중단점은 프로그램의 현재 상태를 확인할 수 있도록 실행을 일시적으로 중단해야하는 코드 내의 신호입니다. 중단점은 어떻게 설정할 수 있을까요? Python 3.6 이하에서는 다음과 같이 설정할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> pdb<span class="token punctuation">;</span> pdb<span class="token punctuation">.</span>set_trace<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> f <span class="token operator">/</span> e
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://docs.python.org/library/pdb.html" target="_blank" rel="noopener noreferrer">pdb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>는 표준 라이브러리의 Python 디버거입니다. Python 3.7에서는 새로운 <code>breakpoint()</code> 함수를 호출함으로써 위 명령문을 단축할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    breakpoint<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> f <span class="token operator">/</span> e
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>백그라운드에서, <code>breakpoint()</code>는 먼저 <code>pdb</code>를 임포트한 뒤 <code>pub.set_trace()</code>를 호출합니다. 가시적인 이점은 <code>breakpoint()</code>가 <code>import pdb; pdb.set_trace()</code>보다 더 기억하기 쉬우며 27자 대신 12자만 작성하면 된다는 것입니다. 하지만, <code>breakpoint()</code>을 사용함으로써 얻을 수 있는 실질적인 이점은 커스터마이징 기능입니다.</p><p><code>breakpoint()</code>가 작성된 <code>bugs.py</code> 스크립트를 실행해봅시다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>$ python3.7 bugs.py
&gt; /home/gahjelle/bugs.py(3)divide()
-&gt; return f / e
(Pdb)
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>스크립트는 <code>breakpoint()</code>를 만나면 실행이 중단되고 PDB 디버깅 세션에 진입할 것입니다. <code>c</code>를 입력하고 엔터를 누르면 스크립트를 계속 진행할 수 있습니다. PDB와 디버깅에 대해 좀 더 자세히 알고싶다면 <a href="https://realpython.com/python-debugging-pdb/" target="_blank" rel="noopener noreferrer">Nathan Jennings의 PDB 가이드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하세요.</p><p>이제 여러분이 버그를 고쳤다고 생각한다고 해봅시다. 그럼 이제 여러분은 디버거에서의 중단 없이 코드를 실행하고 싶을겁니다. 그냥 <code>breakpoint()</code> 라인을 주석처리 해버려도 되지만 <code>PYTHONBREAKPOINT</code> 환경 변수를 사용할 수도 있습니다. 이 변수는 <code>breakpoint()</code>의 동작을 제어하는데 <code>PYTHONBREAKPOINT=0</code>으로 설정하면 모든 <code>breakpoint()</code> 호출이 무시됩니다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>$ PYTHONBREAKPOINT=0 python3.7 bugs.py
ZeroDivisionError: division by zero
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>버그가 안고쳐진 것 같습니다 ..</p><p>또 다른 옵션은 <code>PYTHONBREAKPOINT</code>를 사용해 PDB 외의 디버거를 지정하는 것입니다. 예를 들어, <a href="https://pypi.org/project/pudb/" target="_blank" rel="noopener noreferrer">PuDB (콘솔 시각화 디버거)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용하려면 다음과 같이 설정하면 됩니다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>$ PYTHONBREAKPOINT=pudb.set_trace python3.7 bugs.py
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>위 명령어가 동작하려면 <code>pudb</code>가 이미 설치되어 있어야합니다. Python이 알아서 <code>pudb</code>를 임포트합니다. 이 방법으로 기본 디버거를 설정할 수 있는데 <code>PYTHONBREAKPOINT</code> 환경 변수를 원하는 디버거로 설정해두면 됩니다. 여러분의 시스템에 맞는 환경 변수를 설정하는 방법은 <a href="https://www.schrodinger.com/kb/1842" target="_blank" rel="noopener noreferrer">이 가이드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하세요.</p><p>새로운 <code>breakpoint()</code> 함수는 디버거에서만 동작하지는 않습니다. 한 가지 편리한 옵션은 코드 내에서 대화형 셸을 시작하는 것입니다. 예를 들어, IPython 세션을 시작하려면 다음과 같이 설정하면 됩니다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>$ PYTHONBREAKPOINT=IPython.embed python3.7 bugs.py
IPython 6.3.1 -- An enhanced Interactive Python. Type '?' for help.

In [1]: print(e / f)
0.0
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>또한 자체 함수를 만들어 <code>breakpoint()</code>에서 호출되도록 할 수도 있습니다. 다음 코드는 지역 스코프의 모든 변수들을 출력합니다. 이 코드를 <code>bp_utils.py</code> 파일에 추가해봅시다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> pprint <span class="token keyword">import</span> pprint
<span class="token keyword">import</span> sys

<span class="token keyword">def</span> <span class="token function">print_locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    caller <span class="token operator">=</span> sys<span class="token punctuation">.</span>_getframe<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 호출자 (Caller)는 한 프레임 위에 있습니다.</span>
    pprint<span class="token punctuation">(</span>caller<span class="token punctuation">.</span>f_locals<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>이 함수를 사용하려면 <code>&lt;module&gt;.&lt;function&gt;</code> 표기법을 사용해 <code>PYTHONBREAKPOINT</code>를 이전과 같이 설정하면 됩니다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>$ PYTHONBREAKPOINT=bp_utils.print_locals python3.7 bugs.py 
{'e': 0, 'f': 1}
ZeroDivisionError: division by zero
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>일반적으로 <code>breakpoint()</code>는 인자가 필요없는 함수와 메서드를 호출하는데 사용되지만, 인자를 전달할 수도 있습니다. <code>bugs.py</code>의 <code>breakpoint()</code>를 다음과 같이 수정해봅시다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code>breakpoint<span class="token punctuation">(</span>e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">&quot;&lt;-END\n&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>Note:</strong><code>pdb.set_trace()</code>는 위치 인자를 받지 않기 때문에 기본 PDB 디버거는 위 라인에서 <code>TypeError</code>를 발생시킵니다.</p></div><p><code>print()</code> 함수로 가장한 <code>breakpoint()</code>를 사용해 이 코드를 실행하면 인자가 전달되는 간단한 예시를 볼 수 있습니다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>$ PYTHONBREAKPOINT=print python3.7 bugs.py 
0 1&lt;-END
ZeroDivisionError: division by zero
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>이 함수에 대한 자세한 내용은 <a href="https://www.python.org/dev/peps/pep-0553/" target="_blank" rel="noopener noreferrer">PEP 553<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>과 <a href="https://docs.python.org/3.7/library/functions.html#breakpoint" target="_blank" rel="noopener noreferrer">breakpoint()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 및 <a href="https://docs.python.org/3.7/library/sys.html#sys.breakpointhook" target="_blank" rel="noopener noreferrer">sys.breakpointhook()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 문서를 참고하세요.</p><h2 id="데이터-클래스-dataclass"><a href="#데이터-클래스-dataclass" aria-hidden="true" class="header-anchor">#</a> 데이터 클래스 (dataclass)</h2><p>새로운 <a href="https://docs.python.org/3.7/library/dataclasses.html" target="_blank" rel="noopener noreferrer">데이터 클래스 (dataclasses)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 모듈은 <code>.__init__()</code> , <code>.__repr__()</code> 및 <code>.__eq__()</code>와 같은 특수 메서드를 자동으로 추가함으로써 클래스를 보다 더 편리하게 작성할 수 있도록 해줍니다. <code>@dataclass</code> 데코레이터를 사용해 다음과 같이 작성할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> dataclasses <span class="token keyword">import</span> dataclass<span class="token punctuation">,</span> field

@dataclass<span class="token punctuation">(</span>order<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Country</span><span class="token punctuation">:</span>
    name<span class="token punctuation">:</span> <span class="token builtin">str</span>
    population<span class="token punctuation">:</span> <span class="token builtin">int</span>
    area<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> field<span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> compare<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    coastline<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">def</span> <span class="token function">beach_per_person</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;Meters of coastline per person&quot;&quot;&quot;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>coastline <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">/</span> self<span class="token punctuation">.</span>population
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>이 9줄의 코드는 많은 보일러 플레이트 코드와 모범 사례를 보여주고 있습니다. 이 <code>Country</code> 클래스를 일반 클래스로 구현하려면 어떤 것들이 필요할지 생각해봅시다. <code>__init__()</code> 메서드, <code>repr</code>, 6개의 비교 메서드 및 <code>.beach_per_person()</code> 메서드가 필요합니다. 데이터 클래스로 구현한 <code>Country</code> 클래스를 일반 클래스로 구현하면 다음과 같습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Country</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> population<span class="token punctuation">,</span> area<span class="token punctuation">,</span> coastline<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>population <span class="token operator">=</span> population
        self<span class="token punctuation">.</span>area <span class="token operator">=</span> area
        self<span class="token punctuation">.</span>coastline <span class="token operator">=</span> coastline

    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            f<span class="token string">&quot;Country(name={self.name!r}, population={self.population!r},&quot;</span>
            f<span class="token string">&quot; coastline={self.coastline!r})&quot;</span>
        <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__eq__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> other<span class="token punctuation">.</span>__class__ <span class="token keyword">is</span> self<span class="token punctuation">.</span>__class__<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>population<span class="token punctuation">,</span> self<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span>
                <span class="token operator">==</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>population<span class="token punctuation">,</span> other<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">return</span> NotImplemented

    <span class="token keyword">def</span> <span class="token function">__ne__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> other<span class="token punctuation">.</span>__class__ <span class="token keyword">is</span> self<span class="token punctuation">.</span>__class__<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>population<span class="token punctuation">,</span> self<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span>
                <span class="token operator">!=</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>population<span class="token punctuation">,</span> other<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">return</span> NotImplemented

    <span class="token keyword">def</span> <span class="token function">__lt__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> other<span class="token punctuation">.</span>__class__ <span class="token keyword">is</span> self<span class="token punctuation">.</span>__class__<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>population<span class="token punctuation">,</span> self<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>
                other<span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>population<span class="token punctuation">,</span> other<span class="token punctuation">.</span>coastline
            <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> NotImplemented

    <span class="token keyword">def</span> <span class="token function">__le__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> other<span class="token punctuation">.</span>__class__ <span class="token keyword">is</span> self<span class="token punctuation">.</span>__class__<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>population<span class="token punctuation">,</span> self<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>
                other<span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>population<span class="token punctuation">,</span> other<span class="token punctuation">.</span>coastline
            <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> NotImplemented

    <span class="token keyword">def</span> <span class="token function">__gt__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> other<span class="token punctuation">.</span>__class__ <span class="token keyword">is</span> self<span class="token punctuation">.</span>__class__<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>population<span class="token punctuation">,</span> self<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span>
                other<span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>population<span class="token punctuation">,</span> other<span class="token punctuation">.</span>coastline
            <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> NotImplemented

    <span class="token keyword">def</span> <span class="token function">__ge__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> other<span class="token punctuation">.</span>__class__ <span class="token keyword">is</span> self<span class="token punctuation">.</span>__class__<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>population<span class="token punctuation">,</span> self<span class="token punctuation">.</span>coastline<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token punctuation">(</span>
                other<span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>population<span class="token punctuation">,</span> other<span class="token punctuation">.</span>coastline
            <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> NotImplemented

    <span class="token keyword">def</span> <span class="token function">beach_per_person</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;Meters of coastline per person&quot;&quot;&quot;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>coastline <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">/</span> self<span class="token punctuation">.</span>population
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>클래스가 생성되면 데이터 클래스는 일반 클래스가 됩니다. 따라서 데이터 클래스도 일반 클래스처럼 상속할 수 있습니다. 데이터 클래스의 주목적은 강력한 클래스, 특히 주로 데이터를 저장하는 작은 클래스를 쉽고 빠르게 작성하는 것입니다.</p><p><code>Country</code> 데이터 클래스는 다른 클래스와 같은 방식으로 사용할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> norway <span class="token operator">=</span> Country<span class="token punctuation">(</span><span class="token string">&quot;Norway&quot;</span><span class="token punctuation">,</span> <span class="token number">5320045</span><span class="token punctuation">,</span> <span class="token number">323802</span><span class="token punctuation">,</span> <span class="token number">58133</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> norway
Country<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Norway'</span><span class="token punctuation">,</span> population<span class="token operator">=</span><span class="token number">5320045</span><span class="token punctuation">,</span> coastline<span class="token operator">=</span><span class="token number">58133</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> norway<span class="token punctuation">.</span>area
<span class="token number">323802</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> usa <span class="token operator">=</span> Country<span class="token punctuation">(</span><span class="token string">&quot;United States&quot;</span><span class="token punctuation">,</span> <span class="token number">326625791</span><span class="token punctuation">,</span> <span class="token number">9833517</span><span class="token punctuation">,</span> <span class="token number">19924</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> nepal <span class="token operator">=</span> Country<span class="token punctuation">(</span><span class="token string">&quot;Nepal&quot;</span><span class="token punctuation">,</span> <span class="token number">29384297</span><span class="token punctuation">,</span> <span class="token number">147181</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> nepal
Country<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Nepal'</span><span class="token punctuation">,</span> population<span class="token operator">=</span><span class="token number">29384297</span><span class="token punctuation">,</span> coastline<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> usa<span class="token punctuation">.</span>beach_per_person<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">0.06099946957342386</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> norway<span class="token punctuation">.</span>beach_per_person<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">10.927163210085629</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>모든 필드 <code>.name</code>, <code>.population</code>, <code>.area</code> 및 <code>.coastline</code>은 클래스를 초기화 할 때 사용됩니다. (물론 <code>.coastline</code>은 옵션입니다) <code>Country</code> 클래스는 자동으로 생성된 적절한 <a href="https://dbader.org/blog/python-repr-vs-str" target="_blank" rel="noopener noreferrer">repr<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 가지고 있지만 다른 메서드 정의들은 일반 클래스에서와 동일하게 동작합니다.</p><p>기본적으로 데이터 클래스는 대등 비교가 가능합니다. <code>@dataclass</code> 데코레이터에 <code>order=True</code>를 지정했기 때문에 <code>Country</code> 클래스는 정렬 또한 가능합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> norway <span class="token operator">==</span> norway
<span class="token boolean">True</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> nepal <span class="token operator">==</span> usa
<span class="token boolean">False</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>norway<span class="token punctuation">,</span> usa<span class="token punctuation">,</span> nepal<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>Country<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Nepal'</span><span class="token punctuation">,</span> population<span class="token operator">=</span><span class="token number">29384297</span><span class="token punctuation">,</span> coastline<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 Country<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Norway'</span><span class="token punctuation">,</span> population<span class="token operator">=</span><span class="token number">5320045</span><span class="token punctuation">,</span> coastline<span class="token operator">=</span><span class="token number">58133</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 Country<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'United States'</span><span class="token punctuation">,</span> population<span class="token operator">=</span><span class="token number">326625791</span><span class="token punctuation">,</span> coastline<span class="token operator">=</span><span class="token number">19924</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>정렬은 필드값을 기준으로 이루어지며 <code>.name</code>, <code>.population</code> 등의 순서로 비교가 수행됩니다. 그러나, <code>field()</code>를 사용하면 비교할 필드를 <a href="https://realpython.com/python-data-classes/#advanced-default-values" target="_blank" rel="noopener noreferrer">직접 정의<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>할 수 있습니다. 이 예제에서 <code>.area</code> 필드는 <code>repr</code>과 비교에서 제외되었습니다.</p><p>데이터 클래스는 <a href="https://dbader.org/blog/writing-clean-python-with-namedtuples" target="_blank" rel="noopener noreferrer">namedtuple<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>과 일부 동일한 작업을 수행합니다. 하지만 데이터 클래스는 <a href="http://www.attrs.org/" target="_blank" rel="noopener noreferrer">attrs 프로젝트<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에서 가장 많은 영향을 받았습니다. 더 많은 예제와 자세한 내용은 <a href="https://realpython.com/python-data-classes/" target="_blank" rel="noopener noreferrer">데이터 클래스에 대한 완벽 가이드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>와 공식 문서인 <a href="https://www.python.org/dev/peps/pep-0557/" target="_blank" rel="noopener noreferrer">PEP 557<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하세요.</p><h2 id="모듈-속성-커스터마이징"><a href="#모듈-속성-커스터마이징" aria-hidden="true" class="header-anchor">#</a> 모듈 속성 커스터마이징</h2><p>속성은 Python의 모든 곳에 존재합니다. 클래스 속성이 가장 잘 알려져 있지만 Python에서 속성은 본질적으로 함수나 모듈을 포함한 그 어떤 객체에도 포함될 수 있습니다. Python의 몇 가지 기본 기능들은 속성으로 구현됩니다. 대부분의 인트로스펙션 기능 (Introspection이란 런타임시에 타입 또는 속성을 결정할 수 있는 능력을 말함), 문서 문자열(docstring) 및 네임스페이스등이 그러합니다. 모듈 내의 함수는 모듈의 속성으로 사용할 수 있습니다.</p><p>속성은 보통 <code>thing.attribute</code>와 같이 닷(.) 표기법을 사용해 가져옵니다. 그러나 런타임중에 명명되는 속성의 경우는 <code>getattr()</code>을 통해 가져올 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> random

random_attr <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;gammavariate&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lognormvariate&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;normalvariate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
random_func <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>random<span class="token punctuation">,</span> random_attr<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;A {random_attr} random value: {random_func(1, 1)}&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>위 코드를 실행하면 다음과 같은 결과가 나옵니다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>A gammavariate random value: 2.8017715125270618
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>클래스에서 <code>thing.attr</code>을 호출하면 가장 먼저 <code>thing</code>에 <code>attr</code>이 정의되어 있는지 확인합니다. 정의되어 있지 않으면 특수 메서드인 <code>thing.__getattr__(&quot;attr&quot;)</code>이 호출됩니다. (이는 상당히 간략화한 것으로, 더 자세한 내용은 <a href="http://blog.lerner.co.il/python-attributes/" target="_blank" rel="noopener noreferrer">이 글<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 참고하세요.) <code>__getattr__()</code> 메서드는 객체의 속성에 대한 접근 제어를 직접 정의할 때 사용할 수 있습니다.</p><p>Python 3.7 이전까지는 모듈 속성을 커스터마이징하는 게 쉽지 않았지만, <a href="https://www.python.org/dev/peps/pep-0562/" target="_blank" rel="noopener noreferrer">PEP 562<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 통해 모듈에서 사용할 수 있는 <code>__dir__()</code> 함수와 함께 <code>__getattr__()</code>가 도입되었습니다. <code>__dir__()</code> 특수 함수를 사용하면 <a href="https://realpython.com/python-modules-packages/#the-dir-function" target="_blank" rel="noopener noreferrer">모듈의 dir()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 호출 결과를 커스터마이징 할 수 있습니다.</p><p>PEP 자체는 이 함수들을 사용할 수 있는 몇 가지 예시들을 제공합니다. 여기에는 함수에 대한 중단(Deprecation) 경고와 무거운 서브모듈의 지연 로딩(Lazy loading)이 포함됩니다. 아래 예제에서는 모듈에 함수를 동적으로 추가할 수 있는 플러그인 시스템을 만들어 볼 것 입니다. 이 예제는 Python의 패키지 시스템을 활용합니다. 패키지에 대한 자세한 내용은 <a href="https://realpython.com/python-modules-packages/" target="_blank" rel="noopener noreferrer">이 글<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 참고하세요.</p><p><code>plugins</code>라는 디렉터리를 만든 뒤, <code>plugins/__init__.py</code> 파일에 다음 코드를 추가해봅시다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> importlib <span class="token keyword">import</span> import_module
<span class="token keyword">from</span> importlib <span class="token keyword">import</span> resources

PLUGINS <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">register_plugin</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;플러그인 등록을 위한 데코레이터&quot;&quot;&quot;</span>
    name <span class="token operator">=</span> func<span class="token punctuation">.</span>__name__
    PLUGINS<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> func
    <span class="token keyword">return</span> func

<span class="token keyword">def</span> <span class="token function">__getattr__</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;명명된 플러그인을 반환합니다&quot;&quot;&quot;</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> PLUGINS<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
    <span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>
        _import_plugins<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> name <span class="token keyword">in</span> PLUGINS<span class="token punctuation">:</span>
            <span class="token keyword">return</span> PLUGINS<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">(</span>
                f<span class="token string">&quot;module {__name__!r} has no attribute {name!r}&quot;</span>
            <span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token boolean">None</span>

<span class="token keyword">def</span> <span class="token function">__dir__</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;사용 가능한 플러그인들을 출력합니다&quot;&quot;&quot;</span>
    _import_plugins<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span>PLUGINS<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">_import_plugins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;플러그인들을 등록하기 위해 모든 리소스를 가져옵니다&quot;&quot;&quot;</span>
    <span class="token keyword">for</span> name <span class="token keyword">in</span> resources<span class="token punctuation">.</span>contents<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> name<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">&quot;.py&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            import_module<span class="token punctuation">(</span>f<span class="token string">&quot;{__name__}.{name[:-3]}&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>이 코드가 무슨 일을 하는지 살펴보기 전에 <code>plugins</code> 디렉터리에 두 개의 파일을 더 추가해봅시다. 먼저 <code>plugins/plugin_1.py</code>를 다음과 같이 작성합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> register_plugin

@register_plugin
<span class="token keyword">def</span> <span class="token function">hello_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from Plugin 1&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>그 다음 <code>plugins/plugin_2.py</code>에 비슷한 코드를 작성합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> register_plugin

@register_plugin
<span class="token keyword">def</span> <span class="token function">hello_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from Plugin 2&quot;</span><span class="token punctuation">)</span>

@register_plugin
<span class="token keyword">def</span> <span class="token function">goodbye</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Plugin 2 says goodbye&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>이 플러그인들은 다음과 같이 사용할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> plugins
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> plugins<span class="token punctuation">.</span>hello_1<span class="token punctuation">(</span><span class="token punctuation">)</span>
Hello <span class="token keyword">from</span> Plugin <span class="token number">1</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>plugins<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'goodbye'</span><span class="token punctuation">,</span> <span class="token string">'hello_1'</span><span class="token punctuation">,</span> <span class="token string">'hello_2'</span><span class="token punctuation">]</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> plugins<span class="token punctuation">.</span>goodbye<span class="token punctuation">(</span><span class="token punctuation">)</span>
Plugin <span class="token number">2</span> says goodbye
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>뭐 딱히 혁신적인 기능인 것 같지는 않지만 무슨 일이 일어난 건지 한 번 살펴봅시다. 기본적으로 <code>plugins.hello_1()</code> 호출이 가능하려면 <code>hello_1()</code>이 <code>plugins</code> 모듈에 정의되어 있거나 <code>plugins</code> 패키지의 <code>__init__.py</code>에 명시적으로 임포트 되어있어야 합니다. 이 예제에선 이 둘 모두 사용하지 않았습니다.</p><p>대신 <code>hello_1()</code>는  <code>plugins</code> 패키지 내의 임의의 파일에 정의되어 있으며 <code>@register_plugin</code><a href="https://realpython.com/primer-on-python-decorators/" target="_blank" rel="noopener noreferrer">데코레이터<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용해 자기 자신을 등록함으로써  <code>plugins</code> 패키지의 일부가 됩니다.</p><p>차이는 미묘한데, 패키지가 사용할 수 있는 함수를 직접 명시하는 대신, 각각의 함수가 자기 자신을 패키지의 일부로 등록하고 있습니다. 이렇게 하면 사용할 수 있는 함수의 목록을 중앙 집중식으로 한 곳에서 관리하지 않고 나머지 코드와는 독립적으로 함수를 추가할 수 있는 간단한 구조를 만들 수 있습니다.</p><p>이제 <code>__getattr__()</code>이 <code>plugins/__init__.py</code> 코드 내에서 수행하는 작업에 대해 간단히 살펴보겠습니다. <code>plugins.hello_1()</code>을 호출하면 Python은 가장 먼저 <code>plugins/__init__.py</code>에서 <code>hello_1()</code> 함수를 검색합니다. 함수가 존재하지 않으면, Python은 대신 <code>__getattr__(&quot;hello_1&quot;)</code>을 호출합니다. <code>__getattr__()</code> 함수의 소스코드를 기억해보세요.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">__getattr__</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Return a named plugin&quot;&quot;&quot;</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> PLUGINS<span class="token punctuation">[</span>name<span class="token punctuation">]</span>        <span class="token comment"># 1) 플러그인 반환</span>
    <span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>
        _import_plugins<span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment"># 2) 모든 플러그인을 가져옴</span>
        <span class="token keyword">if</span> name <span class="token keyword">in</span> PLUGINS<span class="token punctuation">:</span>
            <span class="token keyword">return</span> PLUGINS<span class="token punctuation">[</span>name<span class="token punctuation">]</span>    <span class="token comment"># 3) 플러그인을 다시 반환</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">(</span>   <span class="token comment"># 4) 익셉션 발생</span>
                f<span class="token string">&quot;module {__name__!r} has no attribute {name!r}&quot;</span>
            <span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token boolean">None</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>__getattr__()</code>은 다음 단계들로 이루어져 있습니다. 각 단계별 번호는 코드의 주석 번호와 대응됩니다.</p><ol><li>먼저 <code>PLUGINS</code> 딕셔너리에 플러그인이 존재하는지 확인합니다. <code>name</code>으로 명명된 플러그인이 이미 임포트 되어 있다면 플러그인을 꺼내 반환합니다.</li><li>플러그인이 <code>PLUGINS</code> 딕셔너리에 존재하지 않으면 모든 플러그인을 불러옵니다.</li><li>가져온 다음 플러그인을 사용할 수 있게 되면 플러그인을 반환합니다</li><li>모든 플러그인을 가져온 뒤에도 <code>PLUGINS</code> 딕셔너리에 플러그인이 존재하지 않으면 <code>name</code>이 현재 모듈의 속성 (플러그인)이 아님을 알리는 <code>AttributeError</code> 익셉션을 발생시킵니다.</li></ol><p>그렇다면 <code>PLUGINS</code> 딕셔너리는 어떻게 채워질까요? <code>_import_plugins_()</code> 함수는 <code>plugins</code> 패키지의 모든 Python 파일을 임포트합니다. 그러나 <code>PLUGINS</code>에 플러그인을 직접 등록하는 코드는 보이지 않습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">_import_plugins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Import all resources to register plug-ins&quot;&quot;&quot;</span>
    <span class="token keyword">for</span> name <span class="token keyword">in</span> resources<span class="token punctuation">.</span>contents<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> name<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">&quot;.py&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            import_module<span class="token punctuation">(</span>f<span class="token string">&quot;{__name__}.{name[:-3]}&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>각 플러그인 함수가 <code>@register_plugin</code> 데코레이터로 감싸져 있음을 기억하세요. 이 데코레이터는 플러그인이 임포트되는 시점에 호출되며 실제로 <code>PLUGINS</code> 딕셔너리에 플러그인을 채우는 데 사용됩니다. 플러그인 파일 중 하나를 직접 임포트 해보면 채워지는 과정을 볼 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> plugins
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> plugins<span class="token punctuation">.</span>PLUGINS
<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> plugins<span class="token punctuation">.</span>plugin_1
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> plugins<span class="token punctuation">.</span>PLUGINS
<span class="token punctuation">{</span><span class="token string">'hello_1'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span>function hello_1 at <span class="token number">0x7f29d4341598</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>예제를 계속 진행하면, 모듈에서 <code>dir()</code>를 호출해도 나머지 플러그인들을 가져옴을 볼 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>plugins<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'goodbye'</span><span class="token punctuation">,</span> <span class="token string">'hello_1'</span><span class="token punctuation">,</span> <span class="token string">'hello_2'</span><span class="token punctuation">]</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> plugins<span class="token punctuation">.</span>PLUGINS
<span class="token punctuation">{</span><span class="token string">'hello_1'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span>function hello_1 at <span class="token number">0x7f29d4341598</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
 <span class="token string">'hello_2'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span>function hello_2 at <span class="token number">0x7f29d4341620</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
 <span class="token string">'goodbye'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span>function goodbye at <span class="token number">0x7f29d43416a8</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>dir()</code>는 일반적으로 객체에서 사용 가능한 모든 속성을 나열합니다. 모듈에서 <code>dir()</code>를 사용하면 다음과 같은 결과를 얻습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> plugins
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>plugins<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'PLUGINS'</span><span class="token punctuation">,</span> <span class="token string">'__builtins__'</span><span class="token punctuation">,</span> <span class="token string">'__cached__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span>
 <span class="token string">'__file__'</span><span class="token punctuation">,</span> <span class="token string">'__getattr__'</span><span class="token punctuation">,</span> <span class="token string">'__loader__'</span><span class="token punctuation">,</span> <span class="token string">'__name__'</span><span class="token punctuation">,</span>
 <span class="token string">'__package__'</span><span class="token punctuation">,</span> <span class="token string">'__path__'</span><span class="token punctuation">,</span> <span class="token string">'__spec__'</span><span class="token punctuation">,</span> <span class="token string">'_import_plugins'</span><span class="token punctuation">,</span>
 <span class="token string">'import_module'</span><span class="token punctuation">,</span> <span class="token string">'register_plugin'</span><span class="token punctuation">,</span> <span class="token string">'resources'</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>위 정보도 물론 유용하겠지만, 우리는 사용할 수 있는 플러그인들을 보여주는 데에 더 관심있습니다. Python 3.7에서는 <code>__dir__()</code> 특수 함수를 사용해 모듈의 <code>dir()</code> 반환값을 커스터마이징 할 수 있습니다. <code>plugins/__init__.py</code>에서 이 함수는 모든 플러그인을 임포트한 뒤 플러그인들의 이름을 나열합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">__dir__</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;List available plug-ins&quot;&quot;&quot;</span>
    _import_plugins<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span>PLUGINS<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>예제를 마무리하기 전에, Python 3.7의 또 다른 새로운 기능을 사용했음을 주목하세요. 위 예제에서 우리는 <code>plugins</code> 디렉터리에서 모든 모듈을 임포트하기 위해 <a href="https://docs.python.org/3.7/library/importlib.html#module-importlib.resources" target="_blank" rel="noopener noreferrer">importlib.resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용했습니다. 이 모듈을 사용하면 <code>__file__</code> (안되는 경우도 있음) 이나 <code>pkg_resources</code> (느림)을 사용하지 않고도 모듈 및 패키지 내의 파일과 리소스에 접근할 수 있습니다. <code>importlib.resources</code>의 다른 기능들은 <a href="#%EA%B8%B0%ED%83%80-%EB%A9%8B%EC%A7%84-%EA%B8%B0%EB%8A%A5%EB%93%A4">나중에</a> 살펴보겠습니다.</p><h2 id="향상된-타이핑"><a href="#향상된-타이핑" aria-hidden="true" class="header-anchor">#</a> 향상된 타이핑</h2><p>타입 힌팅과 어노테이션은 Python 3 릴리스 전체에서 꾸준히 개발되어 왔습니다.
Python의 <a href="https://www.youtube.com/watch?v=2xWhaALHTvU" target="_blank" rel="noopener noreferrer">타이핑 시스템<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>은 이제 꽤 안정적입니다.
그럼에도 불구하고 Python 3.7은 성능 향상, 코어 지원 및 전방 참조(forward references)와 같은 몇 가지 개선 사항을 제공합니다.</p><p>Python은 런타임 시에 (명시적으로 <a href="https://pypi.org/project/enforce/" target="_blank" rel="noopener noreferrer">enforce<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>와 같은 패키지를 사용하지 않는 한) 타입 검사를 하지 않습니다.
따라서 코드에 타입 힌트를 추가해도 성능에는 영향을 미치지 않습니다.</p><p>불행히도, 대부분의 타입 힌트가 <code>typing</code> 모듈을 필요로 하기 때문에 성능에 100% 영향이 없지는 않습니다.
<code>typing</code> 모듈은 표준 라이브러리에서 <a href="https://www.python.org/dev/peps/pep-0560/#performance" target="_blank" rel="noopener noreferrer">가장 느린 모듈<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 중 하나입니다.
<a href="https://www.python.org/dev/peps/pep-0560/" target="_blank" rel="noopener noreferrer">PEP 560<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>은 Python 3.7에서 <code>typing</code> 모듈의 속도를 대폭 향상시키는 코어 지원을 추가합니다.
사용하는 입장에서 이에 대한 세부 사항을 알 필요는 없습니다. 느긋하게 누워서 향상된 성능을 즐기세요.</p><p>Python의 타입 시스템은 합리적인 표현력을 지녔지만, 약간의 고통을 주는 한 가지 문제가 있는데 바로 전방 참조(forward references)입니다.
타입 힌트(또는 일반적으로 어노테이션)는 모듈을 가져오는 동안 평가됩니다.
따라서 모든 이름은 사용되기 전에 정의되어 있어야합니다.
따라서 다음은 불가능합니다:</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Tree</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">:</span> Tree<span class="token punctuation">,</span> right<span class="token punctuation">:</span> Tree<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>left <span class="token operator">=</span> left
        self<span class="token punctuation">.</span>right <span class="token operator">=</span> right
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>클래스 <code>Tree</code>가 <code>.__init__()</code> 메서드에서 아직 (완전히) 정의되지 않았으므로 코드를 실행하면 <code>NameError</code>가 발생합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;tree.py&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">class</span> <span class="token class-name">Tree</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;tree.py&quot;</span><span class="token punctuation">,</span> line <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">in</span> Tree
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">:</span> Tree<span class="token punctuation">,</span> right<span class="token punctuation">:</span> Tree<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
NameError<span class="token punctuation">:</span> name <span class="token string">'Tree'</span> <span class="token keyword">is</span> <span class="token operator">not</span> defined
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>이를 해결하기 위해서는 문자열 리터럴 <code>&quot;Tree&quot;</code>를 사용해야합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Tree</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">:</span> <span class="token string">&quot;Tree&quot;</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token string">&quot;Tree&quot;</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>left <span class="token operator">=</span> left
        self<span class="token punctuation">.</span>right <span class="token operator">=</span> right
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>전방 참조에 대한 논의는 <a href="https://www.python.org/dev/peps/pep-0484/#forward-references" target="_blank" rel="noopener noreferrer">PEP 484<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하세요.</p><p>추후에 <a href="http://www.curiousefficiency.org/posts/2014/08/python-4000.html" target="_blank" rel="noopener noreferrer">Python 4.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에서는 전방 참조(forward references)가 허용될 것입니다.
이는 참조가 명시적으로 요구되기 전까진 어노테이션을 평가하지 않음으로써 처리됩니다.
이 제안의 자세한 내용은 <a href="https://www.python.org/dev/peps/pep-0563/" target="_blank" rel="noopener noreferrer">PEP 563<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에 기술되어 있습니다.
Python 3.7에서는 이미 <a href="https://docs.python.org/3/library/__future__.html" target="_blank" rel="noopener noreferrer"><strong>future</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 통해 전방 참조를 사용할 수 있습니다.
이제 다음과 같이 작성할 수 있습니다:</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> annotations

<span class="token keyword">class</span> <span class="token class-name">Tree</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">:</span> Tree<span class="token punctuation">,</span> right<span class="token punctuation">:</span> Tree<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>left <span class="token operator">=</span> left
        self<span class="token punctuation">.</span>right <span class="token operator">=</span> right
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>지연된 어노테이션을 사용함으로써 다소 불명확한 <code>&quot;Tree&quot;</code> 구문을 피하고 타입 힌트도 실행하지 않기 때문에 코드 속도 또한 빨라집니다.
전방 참조(forward references)는 이미 <a href="http://mypy-lang.org/" target="_blank" rel="noopener noreferrer">mypy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에서 지원되고 있습니다.</p><p>지금까지 어노테이션의 가장 일반적인 사용처는 타입 힌팅입니다.
그럼에도 불구하고 런타임 시에 어노테이션에 대한 모든 액세스 권한을 가지며 적절하게 사용할 수 있습니다.
어노테이션을 직접 처리하는 경우 가능한 전방 참조를 명시적으로 처리해야합니다.</p><p>어노테이션이 평가될 때 표시되는 나쁜 예제를 만들어 보겠습니다.
먼저 기존 방식을 사용하면 어노테이션은 가져오는 시점에 평가됩니다.
<code>anno.py</code>에 다음 코드를 작성해보세요:</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Now!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;Hello {name}&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>name</code>의 어노테이션은 <code>print()</code>입니다.
이는 어노테이션이 평가되는 시점을 정확하게 볼 수 있는 유일한 방법입니다.
새 모듈을 가져와보세요:</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> anno
Now!

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> anno<span class="token punctuation">.</span>greet<span class="token punctuation">.</span>__annotations__
<span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> anno<span class="token punctuation">.</span>greet<span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span>
Hello Alice
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>보시다시피, 어노테이션은 임포트 시점에 평가되었습니다.
그 다음 <code>name</code>은 <code>print()</code>의 반환값인 <code>None</code>으로 어노테이트됩니다.
지연된 어노테이션 평가를 사용하려면 <code>__future__</code>를 <code>import</code> 하세요.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> annotations

<span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Now!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;Hello {name}&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>이 수정된 코드를 임포트하면 어노테이션을 평가되지 않습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> anno

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> anno<span class="token punctuation">.</span>greet<span class="token punctuation">.</span>__annotations__
<span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">&quot;print('Now!')&quot;</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> anno<span class="token punctuation">.</span>greet<span class="token punctuation">(</span><span class="token string">&quot;Marty&quot;</span><span class="token punctuation">)</span>
Hello Marty
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>Now!</code>는 출력되지 않았고, 어노테이션은 <code>__annotations__</code> 딕셔너리에 문자열 리터럴로 보관됩니다 남아 있음에 주목하세요.
어노테이션을 평가하려면 <code>typing.get_type_hints()</code> 또는 <code>eval()</code>을 사용하세요.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> typing
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> typing<span class="token punctuation">.</span>get_type_hints<span class="token punctuation">(</span>anno<span class="token punctuation">.</span>greet<span class="token punctuation">)</span>
Now!
<span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'NoneType'</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>anno<span class="token punctuation">.</span>greet<span class="token punctuation">.</span>__annotations__<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Now!

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> anno<span class="token punctuation">.</span>greet<span class="token punctuation">.</span>__annotations__
<span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">&quot;print('Now!')&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>__annotations__</code> 딕셔너리는 절대로 수정되지 않으므로 어노테이션을 사용할 때마다 평가해야합니다.</p><h2 id="시간-정밀도"><a href="#시간-정밀도" aria-hidden="true" class="header-anchor">#</a> 시간 정밀도</h2><p>Python 3.7에서는 <a href="https://docs.python.org/3/library/time.html" target="_blank" rel="noopener noreferrer">time<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 모듈에 <a href="https://www.python.org/dev/peps/pep-0564/" target="_blank" rel="noopener noreferrer">PEP 564<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에서 소개된 몇 가지 새로운 기능이 추가되었습니다.</p><p>여기서는 다음의 주목할만한 6개의 함수를 소개합니다.</p><ul><li><strong>clock_gettime_ns() :</strong> 지정된 클럭의 시간 값을 나노초 단위로 반환합니다.</li><li><strong>clock_settime_ns() :</strong> 지정된 클럭의 시간 값을 나노초 단위로 설정합니다.</li><li><strong>monotinic_ns() :</strong> 거꾸로 돌릴 수 없는 (가령, 서머타임 때문에 시간이 앞당겨지는 경우가 있음) 단조 증가 클럭의 시간을 나노초 단위로 반환합니다.</li><li><strong>perf_counter_ns() :</strong> 특별히 짧은 시간을 측정하기 위해 고안된 퍼포먼스 카운터의 값을 나노초 단위로 반환합니다.</li><li><strong>process_time_ns() :</strong> 현재 프로세스의 시스템 및 유저 CPU 시간의 합(sleep 시간은 포함하지 않음)을 나노초 단위로 반환합니다.</li><li><strong>time_ns() :</strong> 1970년 1월 1일부터 현재까지의 시간을 나노초 단위로 반환합니다.</li></ul><p>어떤 의미에서는 딱히 새로울 게 없습니다. 각 함수는 접미사 <code>_ns</code>가 없는 기존의 함수들과 비슷합니다 차이점이라고하면 기존 함수는 초를 <code>float</code>형으로 반환하지만, 새로 추가된 함수는 나노초를 <code>int</code>형으로 반환한다는 것입니다.
대부분의 애플리케이션에서는 새로운 나노초 함수와 기존의 나노초 함수의 차이가 와닿지 않을 수도 있습니다. 그러나 새 함수는 <code>float</code> 대신 <code>int</code> 사용하기 때문에 다루기가 좀 더 수월합니다. 부동 소수점(Floating point) 숫자들은 <a href="https://docs.python.org/3/tutorial/floatingpoint.html" target="_blank" rel="noopener noreferrer">태생적으로 부정확<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>하기 때문입니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.1</span>
<span class="token number">0.30000000000000004</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.1</span> <span class="token operator">==</span> <span class="token number">0.3</span>
<span class="token boolean">False</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>이는 Python의 문제가 아니라 컴퓨터가 유한한 비트 수를 사용해 무한 소수를 표현하는 과정에서 나타난 결과입니다.
Python의 <code>float</code>는 <a href="https://en.wikipedia.org/wiki/IEEE_754" target="_blank" rel="noopener noreferrer">IEEE 754 표준<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 따르며 53개의 유효비트를 사용합니다.
104일보다 많은 시간(2의 53승 혹은 <a href="https://en.wikipedia.org/wiki/Names_of_large_numbers" target="_blank" rel="noopener noreferrer">9000조 나노초<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>은 <code>float</code>으로는 나노초의 정밀도를 표현할 수 없습니다. 그에 반해 Python의 <code>int</code>형 숫자는 무한하기 때문에 <code>int</code>형 나노초는 시간값과 무관하게 항상 나노초 정밀도를 가집니다.</p><p>예시와 같이 <code>time.time()</code>은 1970년 1월 1일부터 흐른 시간을 초 단위로 반환합니다. 이 숫자는 꽤 크며 정밀도는 마이크로초 수준입니다. 이 함수는 <code>_ns</code> 버전에서 엄청난 개선을 이뤄냈습니다. <code>time.time_ns()</code>의 정밀도는 <code>time.time()</code>보다 <a href="https://www.python.org/dev/peps/pep-0564/#analysis" target="_blank" rel="noopener noreferrer">약 3배 이상<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 향상 되었습니다.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>그런데 나노초가 뭔가요? 기술적으로는 10억분의 1 혹은 1e-9 초를 말합니다. 별로 와닿는 숫자는 아닙니다. 좀 더 자세한 설명은 <a href="https://en.wikipedia.org/wiki/Grace_Hopper#Anecdotes" target="_blank" rel="noopener noreferrer">Grace Hopper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>의 <a href="https://www.youtube.com/watch?v=JEpsKnWZrJ8" target="_blank" rel="noopener noreferrer">나노초 설명 영상<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 참고하세요.</p></div><p>여담으로, 나노초 정밀도의 시간을 다루는 경우에는 <code>datetime</code> 표준 라이브러리는 사용하기 어렵습니다. <code>datetime</code>은 마이크로초 단위로만 동작하기 때문입니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token punctuation">,</span> timedelta
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> datetime<span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span> <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> datetime<span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span> <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>이 경우엔 대신 <a href="http://www.astropy.org/" target="_blank" rel="noopener noreferrer"><code>astropy</code> 프로젝트<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용할 수 있습니다.
<a href="http://docs.astropy.org/en/stable/time/" target="_blank" rel="noopener noreferrer"><code>astropy.time</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 패키지는 우주의 나이 이상의 시간을 나노초 이하의 정밀도로 보장하는 두 개의 <code>float</code>형 객체를 사용하여 datetime을 표현합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> astropy<span class="token punctuation">.</span>time <span class="token keyword">import</span> Time<span class="token punctuation">,</span> TimeDelta
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Time<span class="token punctuation">(</span><span class="token string">&quot;2018-06-27&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Time <span class="token builtin">object</span><span class="token punctuation">:</span> scale<span class="token operator">=</span><span class="token string">'utc'</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'iso'</span> value<span class="token operator">=</span><span class="token number">2018</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00.000</span><span class="token operator">&gt;</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> Time<span class="token punctuation">(</span><span class="token string">&quot;2018-06-27&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> TimeDelta<span class="token punctuation">(</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">&quot;sec&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> Time<span class="token punctuation">(</span><span class="token string">&quot;2018-06-27&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sec
<span class="token number">9.976020010071807e-10</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>astropy</code>의 최신 버전은 Python 3.5 이후 버전에서 사용할 수 있습니다.</p><h2 id="기타-멋진-기능들"><a href="#기타-멋진-기능들" aria-hidden="true" class="header-anchor">#</a> 기타 멋진 기능들</h2><p>지금까지 Python 3.7에 새롭게 추가된 주요 기능들에 대해서 살펴보았습니다. 그러나 이 외에도 다른 멋진 기능들이 많이 추가되었습니다. 이 섹션에서는 그중 몇 가지 기능들에 대해서 간단히 살펴보겠습니다.</p><h3 id="딕셔너리-순서-보장"><a href="#딕셔너리-순서-보장" aria-hidden="true" class="header-anchor">#</a> 딕셔너리 순서 보장</h3><p>Python 3.6의 CPython 구현체에는 순서를 가진 딕셔너리가 구현되어 있습니다. (<a href="http://pypy.org/" target="_blank" rel="noopener noreferrer">PyPy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에도 있습니다) 즉, 딕셔너리의 항목들은 삽입된 순서대로 순회됩니다. 첫 번째 예제에서는 Python 3.5를, 두 번째 예제에서는 Python 3.6을 사용했습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>  <span class="token comment"># Python &lt;= 3.5</span>
<span class="token punctuation">{</span><span class="token string">'three'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>  <span class="token comment"># Python &gt;= 3.6</span>
<span class="token punctuation">{</span><span class="token string">'one'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Python 3.6에서 이 순서는 단지 <code>dict</code> 구현체의 (훌륭한) 결과물일 뿐입니다. 그러나 Python 3.7에서는 삽입 순서를 유지하는 딕셔너리가 <a href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" target="_blank" rel="noopener noreferrer">언어 명세<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>의 일부로 들어갔습니다. 따라서 이 기능은 Python 3.7 이상 (혹은 CPython 3.6 이상)을 지원하는 프로젝트에서만 사용할 수 있습니다.</p><h3 id="async-및-await-키워드-추가"><a href="#async-및-await-키워드-추가" aria-hidden="true" class="header-anchor">#</a> &quot;async&quot; 및 &quot;await&quot; 키워드 추가</h3><p>Python 3.5에서는 <a href="https://www.python.org/dev/peps/pep-0492/" target="_blank" rel="noopener noreferrer">async 및 await 문법을 활용한 코루틴<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>이 소개되었습니다. 이전 버전과의 호환성 문제를 피하기 위해 <code>async</code>와 <code>await</code>는 예약된 키워드 목록에 추가되지 않았습니다. 즉, <code>async</code> 및 <code>await</code>라는 이름을 가진 변수나 함수를 정의할 수 있었습니다.</p><p>Python 3.7에서는 키워드로 추가되었기 때문에 이는 더 이상 불가능합니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token number">1</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span>
    <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token number">1</span>
          <span class="token operator">^</span>
SyntaxError<span class="token punctuation">:</span> invalid syntax

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span>
    <span class="token keyword">def</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token operator">^</span>
SyntaxError<span class="token punctuation">:</span> invalid syntax
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="새로워진-asyncio"><a href="#새로워진-asyncio" aria-hidden="true" class="header-anchor">#</a> 새로워진 &quot;asyncio&quot;</h3><p>이벤트 루프, 코루틴 및 futures를 사용하여 현대적인 방식으로 동시성을 처리하기 위한 <code>asyncio</code> 표준 라이브러리는 Python 3.4에서 추가되었습니다. 이에 대한 자세한 내용은 <a href="https://hackernoon.com/asyncio-for-the-working-python-developer-5c468e6e2e8e" target="_blank" rel="noopener noreferrer">이 글<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 참고하세요.</p><p>Python 3.7에서 <code>asyncio</code> 모듈에는 많은 새로운 기능, 컨텍스트 변수 (<a href="#context-variables">아래</a> 참고) 지원 및 성능 향상을 포함한 <a href="https://docs.python.org/3.7/whatsnew/3.7.html#asyncio" target="_blank" rel="noopener noreferrer">주요 변경 사항들<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>이 추가되었습니다. 그중 특히 눈여겨 볼만한건, 동기 코드에서의 코루틴 호출을 단순화한 <code>asyncio.run()</code>입니다. <code>asyncio.run()</code> 을 사용하면 이벤트 루프를 명시적으로 생성할 필요가 없습니다. 이제 비동기 Hello World 프로그램은 다음과 같이 작성할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> asyncio

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">hello_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>

asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>hello_world<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="컨텍스트-변수"><a href="#컨텍스트-변수" aria-hidden="true" class="header-anchor">#</a> 컨텍스트 변수</h3><p>컨텍스트 변수는 컨텍스트에 따라 다른 값을 가질 수 있는 변수입니다.
이들은 각 실행 스레드가 같은 변수에 대해 서로 다른 값을 가질 수 있는 스레드-로컬 저장소(Thread-Local Storage)와 유사합니다.
그러나 컨텍스트 변수의 경우 하나의 실행 스레드에 여러 컨텍스트가 있을 수 있습니다.
컨텍스트 변수의 주요 사용 사례는 동시 비동기 작업에서 변수를 추적하는 것입니다.</p><p>다음 예제는 각각 <code>name</code> 값에 대한 자체 값을 가진 세 개의 컨텍스트를 구성합니다.
<code>greet()</code> 함수는 나중에 각 컨텍스트 내에서 <code>name</code> 값을 사용할 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> contextvars

name <span class="token operator">=</span> contextvars<span class="token punctuation">.</span>ContextVar<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
contexts <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;Hello {name.get()}&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 컨텍스트를 구성하고 컨텍스트 변수명을 설정합니다</span>
<span class="token keyword">for</span> first_name <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">&quot;Steve&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Dina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Harry&quot;</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    ctx <span class="token operator">=</span> contextvars<span class="token punctuation">.</span>copy_context<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>run<span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">,</span> first_name<span class="token punctuation">)</span>
    contexts<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>

<span class="token comment"># 각 컨텍스트 내부에서 greet 함수를 실행합니다</span>
<span class="token keyword">for</span> ctx <span class="token keyword">in</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>contexts<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ctx<span class="token punctuation">.</span>run<span class="token punctuation">(</span>greet<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>이 스크립트를 실행하면 Steve, Dina, Harry가 역순으로 출력됩니다.</p><h3 id="importlib-resources-로-데이터-파일-불러오기"><a href="#importlib-resources-로-데이터-파일-불러오기" aria-hidden="true" class="header-anchor">#</a> &quot;Importlib.resources&quot;로 데이터 파일 불러오기</h3><p>Python 프로젝트를 패키징 할 때 마주하는 문제 중 하나는 프로젝트에 필요한 데이터 파일과 같은 프로젝트 리소스를 어떻게 처리할지 결정하는 일입니다. 다음은 흔히 사용되는 몇 가지 옵션들입니다.</p><ul><li>데이터 파일 경로 하드코딩.</li><li>데이터 파일을 패키지 안에 넣고 <code>__file__</code>로 불러오기.</li><li><a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html" target="_blank" rel="noopener noreferrer">setuptools.pkg_resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용하여 데이터 파일 리소스에 접근하기.</li></ul><p>이들 각각에는 단점이 있습니다. 첫 번째 옵션은 이식성이 떨어지며, <code>__file__</code>은 이식성은 뛰어나지만 설치된 Python 프로젝트가 zip으로 끝나 <code>__file__</code> 속성이 없을 수도 있습니다. 그리고 세 번째 옵션은 상당히 느립니다.</p><p>더 나은 방법은 표준 라이브러리에 새로 추가된 <a href="https://docs.python.org/3.7/library/importlib.html#module-importlib.resources" target="_blank" rel="noopener noreferrer">importlib.resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 모듈을 사용하는 것입니다. 이 모듈은 Python의 기존 임포트 기능을 사용하여 데이터 파일을 임포트합니다. 다음과 같이 Python 패키지 내부에 리소스가 있다고 가정해봅시다.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>data/
│
├── alice_in_wonderland.txt
└── __init__.py
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>data</code> 디렉터리는 <a href="https://realpython.com/python-modules-packages/" target="_blank" rel="noopener noreferrer">Python 패키지<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>이어야함에 주목하세요. 즉, 이 디렉터리는 <code>__init__.py__</code> 파일 (빈 파일이어도 됨)을 포함해야합니다. 그 다음엔 다음과 같이 <code>alice_in_wonderland.txt</code> 파일을 읽어올 수 있습니다.</p><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> importlib <span class="token keyword">import</span> resources
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">with</span> resources<span class="token punctuation">.</span>open_text<span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alice_in_wonderland.txt&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fid<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     alice <span class="token operator">=</span> fid<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>alice<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
CHAPTER I<span class="token punctuation">.</span> Down the Rabbit<span class="token operator">-</span>Hole

Alice was beginning to get very tired of sitting by her sister on the
bank<span class="token punctuation">,</span> <span class="token operator">and</span> of having nothing to do<span class="token punctuation">:</span> once <span class="token operator">or</span> twice she had peeped into the
book her sister was reading<span class="token punctuation">,</span> but it had no pictures <span class="token operator">or</span> conversations <span class="token keyword">in</span>
it<span class="token punctuation">,</span> ‘<span class="token operator">and</span> what <span class="token keyword">is</span> the use of a book<span class="token punctuation">,</span>’ thought Alice ‘without pictures <span class="token operator">or</span>
conversations?’
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>파일을 바이너리 모드로 읽기 위해선 유사 함수인 <a href="https://docs.python.org/3.7/library/importlib.html#importlib.resources.open_binary" target="_blank" rel="noopener noreferrer">resources.open_binary<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용하면 됩니다. 이전에 <a href="#%EB%AA%A8%EB%93%88-%EC%86%8D%EC%84%B1-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95">모듈 속성으로 정의하는 플러그인 예제</a>에서는 사용 가능한 플러그인을 검색하기 위해 <code>importlib.resources</code>의 <code>resources.contents()</code>를 사용했었습니다. 좀 더 자세한 내용은 <a href="https://www.youtube.com/watch?v=ZsGFU2qh73E" target="_blank" rel="noopener noreferrer">Barry Warsaw’s PyCon 2018 토크<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하세요.</p><p><a href="https://pypi.org/project/importlib_resources/" target="_blank" rel="noopener noreferrer">백포트<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 통해 Python 2.7과 Python 3.4+에서도 <code>importlib.resources</code>를 사용할 수 있습니다. <a href="http://importlib-resources.readthedocs.io/en/latest/migration.html" target="_blank" rel="noopener noreferrer">pkg_resources에서 importlib.resources로 마이그레이션 하는 방법에 대한 가이드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>도 있습니다.</p><h3 id="개발자를-위한-트릭"><a href="#개발자를-위한-트릭" aria-hidden="true" class="header-anchor">#</a> 개발자를 위한 트릭</h3><p>Python 3.7에는 개발자를 위한 기능들도 몇 가지 추가되었습니다. 여러분은 <a href="#breakpoint-%EB%82%B4%EC%9E%A5-%ED%95%A8%EC%88%98-%EC%A7%80%EC%9B%90">이미 새로 추가된 내장 breakpoint()를 살펴본 적이 있습니다</a>. 추가로 Python 인터프리터에 몇 가지 새로운 <a href="https://docs.python.org/3.7/using/cmdline.html#id5" target="_blank" rel="noopener noreferrer">-X 커맨드라인 옵션<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>이 추가되었습니다.</p><p><code>-X importtime</code> 옵션을 사용하면 스크립트에서 임포트에 소요되는 시간을 쉽게 확인해 볼 수 있습니다.</p><div class="language-shell line-numbers-mode"><pre class="language-text"><code>$ python3.7 -X importtime my_script.py
import time: self [us] | cumulative | imported package
import time:      2607 |       2607 | _frozen_importlib_external
...
import time:       844 |      28866 |   importlib.resources
import time:       404 |      30434 | plugins
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>cumulative</code> 열은 임포트할 때 소요된 누적 시간을 마이크로초로 보여줍니다. 이 예제에서는 <code>plugins</code> 임포트시 약 0.03초가 소요되었으며 <code>importlib.resources</code>를 임포트하는 데 가장 많은 시간이 소요되었습니다. <code>self</code> 열은 중첩을 제외한 단일 임포트 시간을 보여줍니다.</p><p><code>-X dev</code>를 사용하면 &quot;개발 모드&quot;를 활성화 할 수 있습니다. 개발모드에서는 기본적으로 특정 디버깅 기능과 병목 구간으로 간주되는 런타임 검사 기능이 활성화 됩니다. 여기에는 심각한 크래시에 대한 트랙백뿐만 아니라 더 많은 경고와 디버깅 훅을 보여주는 <a href="https://docs.python.org/library/faulthandler.html#module-faulthandler" target="_blank" rel="noopener noreferrer">faulthandler<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>의 활성화도 포함됩니다.</p><p>마지막으로 <code>-X utf8</code>을 사용하면 <a href="https://docs.python.org/3.7/using/cmdline.html#envvar-PYTHONUTF8" target="_blank" rel="noopener noreferrer">UTF-8 모드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 활성화 할 수 있습니다. (<a href="https://www.python.org/dev/peps/pep-0540/" target="_blank" rel="noopener noreferrer">PEP 540<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 참고하세요) 이 모드에서는 현재 로케일과는 무관하게 텍스트 인코딩에 UTF-8이 사용됩니다.</p><h3 id="최적화"><a href="#최적화" aria-hidden="true" class="header-anchor">#</a> 최적화</h3><p>Python의 모든 새로운 릴리스에는 최적화가 포함되어 있습니다. Python 3.7에서는 다음과 같은 중요한 성능 향상이 이루어졌습니다.</p><ul><li>많은 표준 라이브러리의 메서드 호출에 대한 오버헤드가 줄었습니다.</li><li>메서드 호출 속도가 최대 약 20% 정도 빨라졌습니다.</li><li>Python 자체의 로드 시간이 약 10%-30% 정도 줄었습니다.</li><li><code>typing</code> 모듈의 임포트 속도가 약 7배 빨라졌습니다.</li></ul><p>이 외에도, 다른 많은 (특수한) 최적화가 이루어졌습니디. 자세한 내용은 <a href="https://docs.python.org/3.7/whatsnew/3.7.html#optimizations" target="_blank" rel="noopener noreferrer">이 목록<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>을 참고하세요.</p><p>이러한 모든 최적화의 결론은 <a href="https://speed.python.org/" target="_blank" rel="noopener noreferrer">Python 3.7은 빠르다<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>는 것입니다. 간단히 말해 Python 3.7은 지금까지 릴리스된 <a href="https://hackernoon.com/which-is-the-fastest-version-of-python-2ae7c61a6b2b" target="_blank" rel="noopener noreferrer">CPython의 가장 빠른 버전<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>입니다.</p><h2 id="그래서-업그레이드를-해야하나요"><a href="#그래서-업그레이드를-해야하나요" aria-hidden="true" class="header-anchor">#</a> 그래서, 업그레이드를 해야하나요?</h2><p>간단한 대답부터 시작하겠습니다. 여기서 본 새로운 기능들을 시험해보고 싶다면 Python 3.7을 사용해 볼 수 있습니다. <a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener noreferrer">pyenv<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>나 <a href="https://www.anaconda.com/download/" target="_blank" rel="noopener noreferrer">Anaconda<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 사용하면 여러 버전의 Python을 설치할 수 있습니다. 이를 사용하면 문제없이 Python 3.7을 설치하고 테스트 해볼 수 있습니다.</p><p>자 이제 그럼 조금 더 복잡한 질문들을 해보겠습니다. 여러분의 프로덕션 환경을 Python 3.7로 업그레이드 해야합니까? 개인 프로젝트에서 Python 3.7의 새로운 기능을 사용해야 하나요?</p><p>분명히 주의해야할 건 프로덕션 환경을 업그레이드 하기 전에는 항상 철저한 테스트를 거쳐야 한다는 것입니다. Python 3.7에 도입된 일부기능들이 기존 코드를 망가뜨릴수도 있습니다 (<code>async</code>와 <code>await</code>가 키워드로 추가되었다는점이 한 예입니다). 이미 최신 버전의 Python을 사용하고 있다면 3.7로의 업그레이드는 매우 수월할 것입니다. 조금 보수적으로 본다면 첫 유지보수 릴리스인 Python 3.7.1의 릴리스를 기다려볼 수도 있습니다. 이 릴리스는 <a href="https://www.python.org/dev/peps/pep-0537/#maintenance-releases" target="_blank" rel="noopener noreferrer">2018년 7월중으로 예상됩니다<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><p>여러분의 프로젝트가 3.7에서만 동작해야 한다고 주장하기는 조금 어렵습니다. Python 3.7의 새로운 기능중 상당수는 Python 3.6에서 백포트로 사용할 수 있거나 (데이터 클래스, <code>importlib.resources</code>) 그저 단순한 편의 기능 중 하나 (빠른 로드 및 메서드 호출 속도, 편리한 디버깅 및 <code>-X</code> 옵션)이기 때문입니다. 후자의 경우, Python 3.6 (또는 그 이하)과의 코드 호환성을 유지하면서 Python 3.7을 실행하면 사용할 수 있습니다.</p><p>코드가 Python 3.7에만 의존하도록 만드는 큰 기능들로는 <a href="#%EB%AA%A8%EB%93%88-%EC%86%8D%EC%84%B1-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95">모듈에서의 __getattr__()</a>, <a href="#%ED%96%A5%EC%83%81%EB%90%9C-%ED%83%80%EC%9D%B4%ED%95%91">타입 힌팅에서의 전방 참조</a> 및 <a href="#%EC%8B%9C%EA%B0%84-%EC%A0%95%EB%B0%80%EB%8F%84">나노초 시간 함수</a>가 있습니다. 만약 이 기능들중 어느 것이라도 정말로 필요하다면, 여러분은 계속해서 여러분의 요구사항을 충족시켜나가야 합니다. 그렇지 않다면 당분간은 Python 3.6에서 동작할 수 있도록 하는 게 여러모로 유용할 것입니다.</p><p>업그레이드 할 때 숙지해야할 자세한 내용들은 <a href="https://docs.python.org/3.7/whatsnew/3.7.html#porting-to-python-37" target="_blank" rel="noopener noreferrer">Python 3.7 포팅 가이드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하세요.</p></div><div class="page-edit"><!----><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">7/10/2018, 3:38:53 PM</span></div></div><!----></div></div></div>
    <script src="/assets/js/0.10ada99b.js" defer></script><script src="/assets/js/app.2a5b1e14.js" defer></script>
  </body>
</html>
